import d3node from 'd3-node'
import line from '../src/index'

const data = [
  { key: 1, value: 1 },
  { key: 2, value: 2 },
  { key: 3, value: 3 },
  { key: 4, value: 4 },
  { key: 5, value: 5 }
]
const result = `<divid=\"chart\"><svgxmlns=\"http://www.w3.org/2000/svg\"width=\"960\"height=\"500\"><gtransform=\"translate(30,20)\"><g><gtransform=\"translate(0,460)\"fill=\"none\"font-size=\"10\"font-family=\"sans-serif\"text-anchor=\"middle\"><pathclass=\"domain\"stroke=\"#000\"d=\"M0.5,6V0.5H910.5V6\"></path><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">1.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(114,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">1.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(228,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">2.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(341,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">2.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(455,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">3.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(569,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">3.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(683,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">4.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(796,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">4.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(910,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">5.0</text></g></g><gfill=\"none\"font-size=\"10\"font-family=\"sans-serif\"text-anchor=\"end\"><pathclass=\"domain\"stroke=\"#000\"d=\"M-6,460.5H0.5V0.5H-6\"></path><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,460)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">1.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,403)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">1.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,345)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">2.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,288)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">2.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,230)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">3.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,173)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">3.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,115)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">4.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,58)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">4.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,0)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">5.0</text></g></g><pathfill=\"none\"stroke=\"steelblue\"stroke-width=\"1.5\"d=\"M0,460L38,440.8333333333333C76,421.6666666666667,152,383.3333333333333,227.83333333333334,345C303.6666666666667,306.6666666666667,379.3333333333333,268.3333333333333,455.1666666666667,230C531,191.66666666666666,607,153.33333333333334,682.8333333333334,115C758.6666666666666,76.66666666666667,834.3333333333334,38.333333333333336,872.1666666666666,19.166666666666668L910,0\"></path></g></g></svg></div>`

function removeAllSpace (str) {
  return str.replace(/\s+/g, '')
}

test('line chart generator', () => {
  expect(line).toBeDefined()
  expect(removeAllSpace(line({ data, d3node }))).toBe(removeAllSpace(result))
})
